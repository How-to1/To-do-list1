<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Catch the Falling Stars</title>
  <style>
    body {
      margin: 0;
      background-color: #222;
      color: #fff;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      position: relative;
    }
    canvas {
      background-color: #333;
      border: 2px solid #fff;
      display: block;
    }
    #scoreBoard {
      position: absolute;
      top: 20px;
      left: 20px;
      font-size: 24px;
      z-index: 1;
    }
  </style>
</head>
<body>
  <div id="scoreBoard">Score: 0</div>
  <canvas id="gameCanvas" width="600" height="400"></canvas>
  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreBoard = document.getElementById('scoreBoard');

    let score = 0;

    // Basket properties
    const basket = {
      width: 80,
      height: 20,
      x: canvas.width / 2 - 40,
      y: canvas.height - 30,
      speed: 7
    };

    // Array to hold falling stars
    const stars = [];
    let starInterval = 1500; // New star every 1.5 seconds
    let lastStarTime = Date.now();

    // Keyboard controls
    let rightPressed = false;
    let leftPressed = false;

    document.addEventListener('keydown', keyDownHandler, false);
    document.addEventListener('keyup', keyUpHandler, false);

    function keyDownHandler(e) {
      if (e.key === "Right" || e.key === "ArrowRight") {
        rightPressed = true;
      } else if (e.key === "Left" || e.key === "ArrowLeft") {
        leftPressed = true;
      }
    }

    function keyUpHandler(e) {
      if (e.key === "Right" || e.key === "ArrowRight") {
        rightPressed = false;
      } else if (e.key === "Left" || e.key === "ArrowLeft") {
        leftPressed = false;
      }
    }

    // Draw the basket
    function drawBasket() {
      ctx.beginPath();
      ctx.rect(basket.x, basket.y, basket.width, basket.height);
      ctx.fillStyle = "#ff9800";
      ctx.fill();
      ctx.closePath();
    }

    // Draw a star
    function drawStar(star) {
      ctx.beginPath();
      ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
      ctx.fillStyle = "#ffeb3b";
      ctx.fill();
      ctx.closePath();
    }

    // Check for collision between a star and the basket
    function isColliding(star, basket) {
      return star.x > basket.x && star.x < basket.x + basket.width &&
             star.y + star.radius > basket.y && star.y - star.radius < basket.y + basket.height;
    }

    // Main game loop
    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Move basket based on keyboard input
      if (rightPressed && basket.x < canvas.width - basket.width) {
        basket.x += basket.speed;
      } else if (leftPressed && basket.x > 0) {
        basket.x -= basket.speed;
      }

      drawBasket();

      // Spawn new stars at intervals
      if (Date.now() - lastStarTime > starInterval) {
        const newStar = {
          x: Math.random() * (canvas.width - 20) + 10,
          y: -10,
          radius: 8,
          speed: 3 + Math.random() * 2
        };
        stars.push(newStar);
        lastStarTime = Date.now();
      }

      // Update and draw stars
      for (let i = 0; i < stars.length; i++) {
        const star = stars[i];
        star.y += star.speed;

        // Check collision with basket
        if (isColliding(star, basket)) {
          score += 10;
          stars.splice(i, 1);
          i--;
          continue;
        }
        // Remove star if it goes off-screen
        if (star.y - star.radius > canvas.height) {
          stars.splice(i, 1);
          i--;
          continue;
        }
        drawStar(star);
      }

      // Update score display
      scoreBoard.textContent = "Score: " + score;

      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>
